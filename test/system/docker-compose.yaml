version: "3.7"
name: kubehound-testing
services:
  mongodb:
    image: mongo:6.0.6
    restart: unless-stopped
    container_name: ${COMPOSE_PROJECT_NAME}-storedb
    ports:
      - "127.0.0.1:27017:27017"
    networks:
      - kubenet

  janusgraph:
    build: ../../deployments/kubehound/janusgraph/
    restart: unless-stopped
    container_name: ${COMPOSE_PROJECT_NAME}-graphdb
    ports:
      - "127.0.0.1:8182:8182"
    networks:
      - kubenet
    environment:
      # Enforce strict schema constrains as per https://docs.janusgraph.org/configs/configuration-reference/#schema
      - janusgraph.schema.constraints=true
      - janusgraph.schema.default=none

networks:
  kubenet: